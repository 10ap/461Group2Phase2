import{_ as u,e as d,r as c,o as h,c as g,b as f,w as m,a as s,t as p,f as _,v as y,F as S,d as U}from"./index-4fb3aa71.js";const x={name:"Add",data(){return{ip:"3.22.209.9",uploadStatus:"",npmUrl:"",ingestStatus:""}},methods:{async handleFileUpload(){const e=this.$refs.file;console.log("selected file",e.files);const t=e.files[0],a=new FormData;a.append("file",t),this.uploadStatus="Uploading...";try{const n=await d.post(`http://${this.ip}:8080/upload`,a,{headers:{"Content-Type":"application/zip"}});console.log("File uploaded successfully.",n.data),this.uploadStatus="File uploaded successfully"}catch(n){console.error("Error uploading the file.",n),this.uploadStatus=`Error uploading the file ${n}`}},async npmIngest(){console.log("url: ",this.npmUrl),this.ingestStatus="Ingesting...",fetch(`http://${this.ip}:8080/ingest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:this.npmUrl})}).then(e=>e.json()).then(e=>console.log(e)).then(this.ingestStatus="Successfully ingested").catch(e=>this.ingestStatus=`Failed to ingest: ${e}`)}}},F=s("h1",{class:"title"}," Upload a package ",-1);function k(e,t,a,n,l,i){const r=c("router-link");return h(),g(S,null,[f(r,{to:{name:"home",params:{}},class:"goToBtn"},{default:m(()=>[U("Back to search page")]),_:1}),F,s("input",{ref:"file",onChange:t[0]||(t[0]=o=>i.handleFileUpload()),type:"file"},null,544),s("h3",null,p(l.uploadStatus),1),_(s("input",{id:"textInput",type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>l.npmUrl=o),placeholder:"Type an in npm url to ingest"},null,512),[[y,l.npmUrl]]),s("button",{id:"ingest",onClick:t[2]||(t[2]=(...o)=>i.npmIngest&&i.npmIngest(...o))}," Ingest "),s("h3",null,p(l.ingestStatus),1)],64)}const T=u(x,[["render",k]]);export{T as default};
