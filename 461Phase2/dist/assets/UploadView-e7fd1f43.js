import{_ as c,e as r,r as d,o as g,c as h,b as f,w as m,a as s,t as p,f as _,v as y,F as S,d as x}from"./index-9b12347a.js";const U={name:"Add",data(){return{ip:"3.22.209.9",uploadStatus:"",npmUrl:"",ingestStatus:""}},methods:{async handleFileUpload(){const t=this.$refs.file;console.log("selected file",t.files);const e=t.files[0],a=new FormData;a.append("file",e),this.uploadStatus="Uploading...";try{const l=await r.post(`http://${this.ip}:8080/upload`,a,{headers:{"Content-Type":"application/zip"}});console.log("File uploaded successfully.",l.data),this.uploadStatus="File uploaded successfully"}catch(l){console.error("Error uploading the file.",l),this.uploadStatus=`Error uploading the file ${l}`}},async npmIngest(){console.log("url: ",this.npmUrl),this.ingestStatus="Ingesting...";try{const t=await r.post(`http://${this.ip}:8080/ingest`,{headers:{}});console.log("Ingest call received successfuly",t.data),this.ingestStatus="Successfully ingest"}catch(t){console.error("Error ingest.",t),this.ingestStatus="Failed to ingest"}}}},F=s("h1",{class:"title"}," Upload a package ",-1);function w(t,e,a,l,n,i){const u=d("router-link");return g(),h(S,null,[f(u,{to:{name:"home",params:{}},class:"goToBtn"},{default:m(()=>[x("Back to search page")]),_:1}),F,s("input",{ref:"file",onChange:e[0]||(e[0]=o=>i.handleFileUpload()),type:"file"},null,544),s("h3",null,p(n.uploadStatus),1),_(s("input",{id:"textInput",type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>n.npmUrl=o),placeholder:"Type an in npm url to ingest"},null,512),[[y,n.npmUrl]]),s("button",{id:"ingest",onClick:e[2]||(e[2]=(...o)=>i.npmIngest&&i.npmIngest(...o))}," Ingest "),s("h3",null,p(n.ingestStatus),1)],64)}const v=c(U,[["render",w]]);export{v as default};
